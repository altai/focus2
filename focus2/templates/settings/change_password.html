{% extends "base/base.html" %}


{% block js %}
<script src="{{ url_for('static', filename='focus2/js/change_password.js') }}"></script>
{% endblock %}


{% block content %}
{% from 'base/macros.html' import input_horizontal %}

  <div class="container" ng-app="change_password">
    <ul class="breadcrumb">
      <li><a href="{{ url_for("dashboard.index") }}">Home</a> <span class="divider">/</span></li>
      <li>Personal Settings <span class="divider">/</span></li>
      <li class="active">Change Password</li>
    </ul>

    <div ng-controller="ChangePasswordController">
      <form action='.' class='form-horizontal well ng-pristine ng-valid'
            method='POST'>
            <fieldset>
              {{ input_horizontal(form.current, is_required=True) }}

              <div class='control-group{% if form.new.errors %} error{% endif %}' ng-class="{error: too_short()}">
                <label class='control-label' for='new'>
                  <b>New</b>
                </label>
                <div class='controls'>
                  <input id='new' name='new' type='password' ng-model="new_password" ng-init="new_password = {{form.new.data | tojson}}" value='{{form.new.data or ""}}'></input>
                  <span class='help-inline' ng-show="too_short()">
                    Field must be at least 6 characters long.
                  </span>
                </div>
              </div>

              <div class='control-group{% if form.confirm.errors %} error{% endif %}' ng-class="{error: !wha(), success: (password_match() && !too_short())}">
                <label class='control-label' for='confirm'>
                  <b>Confirm</b>
                </label>
                <div class='controls'>
                  <input id='confirm' name='confirm' type='password' ng-model="confirm_password" ng-init="confirm_password = {{form.confirm.data | tojson}}" value='{{form.confirm.data or ""}}'></input>
                  <span class="help-inline" style="vertical-align: middle;" ng-hide="wha()">
                    Retyped password must match new password.
                  </span>
                  <span class="help-inline" style="vertical-align: middle;" ng-show="password_match()">
                    Passwords are matched
                  </span>
                </div>
              </div>

              <div class="form-actions">
                <button class="btn btn-primary" ng-click="">
                  Change
                </button>
                <a class="btn" href="javascript:history.back()">
                  Cancel
                </a>
              </div>
            </fieldset>
      </form>
    </div>
  </div>
{% endblock %}
